---
apiVersion: v1
kind: ConfigMap
metadata:
  name: lis-config
  namespace: lis-modern
data:
  # Database Configuration
  POSTGRES_HOST: "postgres-service"
  POSTGRES_PORT: "5432"
  DATABASE_MAX_CONNECTIONS: "32"
  DATABASE_MIN_CONNECTIONS: "5"
  DATABASE_CONNECT_TIMEOUT: "30"

  # Redis Configuration
  REDIS_URL: "redis://redis-service:6379"
  REDIS_MAX_CONNECTIONS: "10"

  # Kafka Configuration
  KAFKA_BROKERS: "kafka-service:9092"

  # Server Configuration
  HOST: "0.0.0.0"
  SERVER_WORKERS: "4"
  REQUEST_TIMEOUT: "30"

  # Feature Flags
  ENABLE_CACHING: "true"
  ENABLE_EVENTS: "true"
  ENABLE_METRICS: "true"
  ENABLE_TRACING: "true"
  ENABLE_PLAYGROUND: "false"

  # Logging
  RUST_LOG: "info,sqlx=warn"
  LOG_FORMAT: "json"

  # CORS
  CORS_ALLOWED_ORIGINS: "https://app.lismodern.com"

  # Rate Limiting
  RATE_LIMIT_REQUESTS_PER_MINUTE: "100"

  # Monitoring
  JAEGER_AGENT_HOST: "jaeger-agent"
  JAEGER_AGENT_PORT: "6831"

  # Environment
  ENVIRONMENT: "production"
